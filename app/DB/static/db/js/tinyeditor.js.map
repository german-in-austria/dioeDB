{"version":3,"file":"bundle.js","sources":["../src/constants.js","../src/select.js","../src/button.js","../src/icon.js","../src/toolbar.js","../src/input.js","../src/editor.js","../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["export const BEFORE_BEGIN = 'beforebegin';\nexport const BEFORE_END = 'beforeend';\nexport const TOOLBAR_ITEM = '__toolbar-item';\n","import { BEFORE_END, TOOLBAR_ITEM } from './constants';\n\nconst createOption = (value, text, selected) => {\n  const option = document.createElement('option');\n  option.innerText = text;\n\n  if (value) {\n    option.setAttribute('value', value);\n  }\n\n  if (selected) {\n    option.setAttribute('selected', selected);\n  }\n\n  return option;\n};\n\nexport const createSelect = (commandId, title, options, execCommand) => {\n  const select = document.createElement('select');\n  select.dataset.commandId = commandId;\n  select.className = TOOLBAR_ITEM;\n  select.title = title;\n  select.addEventListener('change', e =>\n    execCommand(commandId, e.target.options[e.target.selectedIndex].value)\n  );\n\n  for (const option of options) {\n    select.insertAdjacentElement(\n      BEFORE_END,\n      createOption(option.value, option.text, option.selected)\n    );\n  }\n\n  return select;\n};\n","import { BEFORE_END, TOOLBAR_ITEM } from './constants';\n\nexport const createButton = (commandId, title, children, execCommand) => {\n  const button = document.createElement('button');\n  button.dataset.commandId = commandId;\n  button.className = TOOLBAR_ITEM;\n  button.title = title;\n  button.type = 'button';\n  button.insertAdjacentElement(BEFORE_END, children);\n  button.addEventListener('click', () => execCommand(commandId));\n\n  return button;\n};\n","export const createIcon = className => {\n  const icon = document.createElement('i');\n  icon.className = className;\n\n  return icon;\n};\n","import { createSelect } from './select';\nimport { createButton } from './button';\nimport { createIcon } from './icon';\nimport { createInput } from './input';\nimport { BEFORE_END } from './constants';\n\nconst NO = 'no';\n\nconst createSeparator = () => {\n  const separator = document.createElement('span');\n  separator.className = '__toolbar-separator';\n\n  return separator;\n};\n\nexport const createToolbar = (options, execCommand) => {\n  const toolbar = document.createElement('div');\n  toolbar.className = '__toolbar';\n\n  // Styles\n  if (options.formatblock !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createSelect(\n        'formatblock',\n        'Styles',\n        [\n          { value: 'h1', text: 'Title 1' },\n          { value: 'h2', text: 'Title 2' },\n          { value: 'h3', text: 'Title 3' },\n          { value: 'h4', text: 'Title 4' },\n          { value: 'h5', text: 'Title 5' },\n          { value: 'h6', text: 'Title 6' },\n          { value: 'p', text: 'Paragraph', selected: true },\n          { value: 'pre', text: 'Preformatted' }\n        ],\n        execCommand\n      )\n    );\n  }\n\n  // Font\n  if (options.fontname !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createSelect(\n        'fontname',\n        'Font',\n        [\n          { value: 'serif', text: 'Serif', selected: true },\n          { value: 'sans-serif', text: 'Sans Serif' },\n          { value: 'monospace', text: 'Monospace' },\n          { value: 'cursive', text: 'Cursive' },\n          { value: 'fantasy', text: 'Fantasy' }\n        ],\n        execCommand\n      )\n    );\n  }\n\n  // Bold\n  if (options.bold !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton('bold', 'Bold', createIcon('fas fa-bold'), execCommand)\n    );\n  }\n\n  // Italic\n  if (options.italic !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton('italic', 'Italic', createIcon('fas fa-italic'), execCommand)\n    );\n  }\n\n  // Underline\n  if (options.underline !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'underline',\n        'Underline',\n        createIcon('fas fa-underline'),\n        execCommand\n      )\n    );\n  }\n\n  // Text color\n  if (options.forecolor !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createInput('forecolor', 'Text color', 'color', execCommand)\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Left align\n  if (options.justifyleft !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'justifyleft',\n        'Left align',\n        createIcon('fas fa-align-left'),\n        execCommand\n      )\n    );\n  }\n\n  // Center align\n  if (options.justifycenter !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'justifycenter',\n        'Center align',\n        createIcon('fas fa-align-center'),\n        execCommand\n      )\n    );\n  }\n\n  // Right align\n  if (options.justifyright !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'justifyright',\n        'Right align',\n        createIcon('fas fa-align-right'),\n        execCommand\n      )\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Numbered list\n  if (options.insertorderedlist !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'insertorderedlist',\n        'Numbered list',\n        createIcon('fas fa-list-ol'),\n        execCommand\n      )\n    );\n  }\n\n  // Bulleted list\n  if (options.insertunorderedlist !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'insertunorderedlist',\n        'Bulleted list',\n        createIcon('fas fa-list-ul'),\n        execCommand\n      )\n    );\n  }\n\n  // Decrease indent\n  if (options.outdent !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'outdent',\n        'Decrease indent',\n        createIcon('fas fa-indent fa-flip-horizontal'),\n        execCommand\n      )\n    );\n  }\n\n  // Increase indent\n  if (options.indent !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'indent',\n        'Increase indent',\n        createIcon('fas fa-indent'),\n        execCommand\n      )\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Clear formatting\n  if (options.removeFormat !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        'removeFormat',\n        'Clear formatting',\n        createIcon('fas fa-eraser'),\n        execCommand\n      )\n    );\n  }\n\n  return toolbar;\n};\n","import { TOOLBAR_ITEM } from './constants';\n\nexport const createInput = (commandId, title, type, execCommand) => {\n  const input = document.createElement('input');\n  input.dataset.commandId = commandId;\n  input.className = TOOLBAR_ITEM;\n  input.title = title;\n  input.type = type;\n  input.addEventListener('change', e => execCommand(commandId, e.target.value));\n\n  return input;\n};\n","import { createToolbar } from './toolbar';\nimport { BEFORE_BEGIN } from './constants';\n\nconst rgbToHex = color => {\n  const digits = /(.*?)rgb\\((\\d+), (\\d+), (\\d+)\\)/.exec(color);\n  const red = parseInt(digits[2]);\n  const green = parseInt(digits[3]);\n  const blue = parseInt(digits[4]);\n  const rgb = blue | (green << 8) | (red << 16);\n\n  return digits[1] + '#' + rgb.toString(16).padStart(6, '0');\n};\n\nexport const transformToEditor = editor => {\n  // Indicate that the element is editable\n  editor.setAttribute('contentEditable', true);\n\n  // Add a custom class\n  editor.className = '__editor';\n\n  // Create an exec command function\n  const execCommand = (commandId, value) => {\n    document.execCommand(commandId, false, value);\n    editor.focus();\n  };\n\n  // Set default paragraph to <p>\n  execCommand('defaultParagraphSeparator', 'p');\n\n  // Create a toolbar\n  const toolbar = createToolbar(editor.dataset, execCommand);\n  editor.insertAdjacentElement(BEFORE_BEGIN, toolbar);\n\n  // Listen for events to detect where the caret is\n  const updateActiveState = () => {\n    const toolbarSelects = toolbar.querySelectorAll('select[data-command-id]');\n    for (const select of toolbarSelects) {\n      const value = document.queryCommandValue(select.dataset.commandId);\n      const option = Array.from(select.options).find(\n        option => option.value === value\n      );\n      select.selectedIndex = option ? option.index : -1;\n    }\n\n    const toolbarButtons = toolbar.querySelectorAll('button[data-command-id]');\n    for (const button of toolbarButtons) {\n      const active = document.queryCommandState(button.dataset.commandId);\n      button.classList.toggle('active', active);\n    }\n\n    const inputButtons = toolbar.querySelectorAll('input[data-command-id]');\n    for (const input of inputButtons) {\n      const value = document.queryCommandValue(input.dataset.commandId);\n      input.value = rgbToHex(value);\n    }\n  };\n  editor.addEventListener('keydown', updateActiveState);\n  editor.addEventListener('keyup', updateActiveState);\n  editor.addEventListener('click', updateActiveState);\n  toolbar.addEventListener('click', updateActiveState);\n};\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { transformToEditor } from \"./editor\";\nimport \"./style.css\";\n\ndocument.querySelectorAll(\"[data-tiny-editor]\").forEach(transformToEditor);\n\nwindow.__tinyEditor = {\n  transformToEditor,\n};\n"],"names":["BEFORE_END","TOOLBAR_ITEM","createSelect","commandId","title","options","execCommand","select","document","createElement","dataset","className","addEventListener","e","target","selectedIndex","value","text","selected","option","insertAdjacentElement","innerText","setAttribute","createButton","children","button","type","createIcon","icon","NO","createSeparator","separator","createToolbar","input","toolbar","formatblock","fontname","bold","italic","underline","forecolor","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","outdent","indent","removeFormat","transformToEditor","editor","focus","updateActiveState","querySelectorAll","queryCommandValue","Array","from","find","index","active","queryCommandState","classList","toggle","digits","red","green","rgb","exec","parseInt","toString","padStart","css","ref","insertAt","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","forEach","window","__tinyEditor"],"mappings":"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"}